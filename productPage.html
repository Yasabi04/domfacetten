<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domfacetten - Produktübersicht</title>
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/body.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="../images/smallLogo.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Bodoni:ital,wght@0,400..700;1,400..700&family=Rufina:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <nav class="mainNavBar">
            <ul class = "navList">
                <li><a href="index.html">Hauptseite</a></li>
                <li><a href="productPage.html">Alle Produkte</a></li>
                <li><a href="me.html">Mein Bereich</a></li>
                <li><span class="searchSymbol"><i class="fas fa-search"></i></span></li>
                <li><span class="userSymbol"><i class="fa-regular fa-user"></i></span></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="productOverview">
            <h1>Alle Produkte</h1>
            <hr>
            <div id="product-container"></div>
            <hr>
        </section>
    </main>

    <footer>
        <nav>
            <ul class="footertext">
                <li><a href="about.html">Über uns</a></li>
                <li><a href="service.html">Service</a></li>
                <li><a href="rechtliches.html">Rechtliches</a></li>
                <li><a href="https://www.instagram.com/domfacetten/">Folgen Sie uns auf Instagram!</a></li>
            </ul>
        </nav>
    </footer>

    <script>
        // CSV-Daten in ein Array von Objekten parsen
        function parseCSV(csv, delimiter = ',') {
        const rows = csv.trim().split('\n');
        const headers = rows[0].split(delimiter);
        const data = rows.slice(1).map(row => {
            const values = row.split(delimiter);
            return headers.reduce((object, header, index) => {
            object[header] = values[index];
            return object;
            }, {});
        });
        return data;
        }

        // HTML-Elemente für jedes Produkt erstellen
        function generateHTML(products) {
        return products.map(product => `
            <article class="productCard" id="product-${product.ArtNr}">
                <a href="singleProduct.html" data-product="${product.ArtNr}">
                    <img src="${product.Foto}" alt="Produktbild von ${product.Bezeichnung}">
                </a>
                    <abbr title="Produkt speichern">
                        <span class = "star">&#9733;</span>
                    </abbr>
                    <h2>${product.Bezeichnung}</h2>
                    <p>Preis: ${product.Preis} €</p>
                    <p>Farben: ${product.Farben}</p>
            </article>
        `).join('');
        }

        // CSV-Daten (Diese sollten idealerweise aus einer externen Quelle geladen werden)
        const csvData = `Foto,Bezeichnung,ArtNr,Preis,Farben
                    images/koelnerDom.jpg,Armband,1234,3.75,ambergreen,borealis,crystalpurple
                    images/Logo.png,Armband2,097124,4.50,black,white
                    images/Logo.png,Armband3,0911,13.99,auratiumgold,technogreen,bridgeblue`;

        // Produkte parsen und HTML generieren
        const products = parseCSV(csvData, ',');
        document.getElementById('product-container').innerHTML = generateHTML(products);

        document.querySelectorAll('.product').forEach(productElement => {
            productElement.addEventListener('click', (event) => {
            const productData = event.currentTarget.getAttribute('data-product');
            localStorage.setItem('selectedProduct', productData);
            alert('Produkt gespeichert: ' + productData);
        });
        });

        document.querySelectorAll('.searchSymbol').forEach(element => {
            element.addEventListener('click', () => {
            if (!document.getElementById("searchBar")) {
                // Erstelle das neue Div-Element
                const searchElement = document.createElement("div");
                searchElement.id = "searchBar";
                searchElement.innerHTML = `
                    <input placeholder="Suche"></input>
                    <span>&#9935;</span>
                `;
                searchElement.style.display = "block";
                // Füge das Div zum Body hinzu
                document.body.appendChild(searchElement);
            } else {
                document.body.removeChild(document.getElementById("searchBar"));
            }
            });
    });
    </script>
</body>
</html>
